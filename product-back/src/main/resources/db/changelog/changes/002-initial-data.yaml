databaseChangeLog:
  - changeSet:
      id: 2
      author: chakir
      changes:
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM roles WHERE name = 'ROLE_USER'"
            tableName: roles
            columns:
              - column:
                  name: name
                  value: ROLE_USER
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM roles WHERE name = 'ROLE_ADMIN'"
            tableName: roles
            columns:
              - column:
                  name: name
                  value: ROLE_ADMIN
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM users WHERE username = 'admin'"
            tableName: users
            columns:
              - column:
                  name: name
                  value: "Admin"
              - column:
                  name: username
                  value: "admin"
              - column:
                  name: email
                  value: "admin@gmail.com"
              - column:
                  name: password
                  value: "$2y$10$QVJmSXpFWze54x9te6VIP.EF88mKyEPZ4TCsYeAvpWRV8k7StOIvC"
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM users WHERE username = 'user'"
            tableName: users
            columns:
              - column:
                  name: name
                  value: "User"
              - column:
                  name: username
                  value: "user"
              - column:
                  name: email
                  value: "user@gmail.com"
              - column:
                  name: password
                  value: "$2y$10$QVJmSXpFWze54x9te6VIP.EF88mKyEPZ4TCsYeAvpWRV8k7StOIvC"
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM users_roles ur JOIN users u ON ur.user_id = u.id JOIN roles r ON ur.role_id = r.id WHERE u.username = 'admin' AND r.name = 'ROLE_USER'"
            tableName: users_roles
            columns:
              - column:
                  name: user_id
                  valueComputed: "(SELECT id FROM users WHERE username = 'admin')"
              - column:
                  name: role_id
                  valueComputed: "(SELECT id FROM roles WHERE name = 'ROLE_USER')"
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM users_roles ur JOIN users u ON ur.user_id = u.id JOIN roles r ON ur.role_id = r.id WHERE u.username = 'admin' AND r.name = 'ROLE_ADMIN'"
            tableName: users_roles
            columns:
              - column:
                  name: user_id
                  valueComputed: "(SELECT id FROM users WHERE username = 'admin')"
              - column:
                  name: role_id
                  valueComputed: "(SELECT id FROM roles WHERE name = 'ROLE_ADMIN')"
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM users_roles ur JOIN users u ON ur.user_id = u.id JOIN roles r ON ur.role_id = r.id WHERE u.username = 'user' AND r.name = 'ROLE_USER'"
            tableName: users_roles
            columns:
              - column:
                  name: user_id
                  valueComputed: "(SELECT id FROM users WHERE username = 'user')"
              - column:
                  name: role_id
                  valueComputed: "(SELECT id FROM roles WHERE name = 'ROLE_USER')"
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM product WHERE name = 'Laptop'"
            tableName: product
            columns:
              - column:
                  name: name
                  value: "Laptop"
              - column:
                  name: price
                  value: "1200.50"
              - column:
                  name: description
                  value: "A powerful laptop for all your needs"
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM product WHERE name = 'Smartphone'"
            tableName: product
            columns:
              - column:
                  name: name
                  value: "Smartphone"
              - column:
                  name: price
                  value: "800.00"
              - column:
                  name: description
                  value: "A modern smartphone with a great camera"
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM product WHERE name = 'Headphones'"
            tableName: product
            columns:
              - column:
                  name: name
                  value: "Headphones"
              - column:
                  name: price
                  value: "250.00"
              - column:
                  name: description
                  value: "Wireless noise-cancelling headphones"
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM product WHERE name = 'Tablet'"
            tableName: product
            columns:
              - column:
                  name: name
                  value: "Tablet"
              - column:
                  name: price
                  value: "450.00"
              - column:
                  name: description
                  value: "10-inch tablet with HD display"
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM product WHERE name = 'Smartwatch'"
            tableName: product
            columns:
              - column:
                  name: name
                  value: "Smartwatch"
              - column:
                  name: price
                  value: "199.99"
              - column:
                  name: description
                  value: "Fitness smartwatch with heart rate monitor"
        - insert:
            preConditions:
              - onFail: MARK_RAN
              - sqlCheck:
                  expectedResult: "0"
                  sql: "SELECT count(*) FROM product WHERE name = 'Bluetooth Speaker'"
            tableName: product
            columns:
              - column:
                  name: name
                  value: "Bluetooth Speaker"
              - column:
                  name: price
                  value: "99.99"
              - column:
                  name: description
                  value: "Portable Bluetooth speaker with deep bass" 